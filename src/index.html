<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Bootstrap 4 Layout</title>
        <meta http-equiv="x-ua-compatible" content="ie=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="/css/bootstrap.css">
        <link rel="stylesheet" href="/css/styles.css">
    </head>

    <body height="100vh" min-height="100vh">

        <script src="/js/jquery.min.js"></script>
        <script src="/js/popper.min.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/d3.min.js"></script>

        <div class="container">
            <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">json</span>
                </div>
                <textarea id="json" class="form-control" aria-label="json"></textarea>
            </div>
            <button type="button" id="loadJson" class="btn btn-primary">Load json</button>

            <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">json</span>
                </div>
                <textarea id="newNode" class="form-control" aria-label="json"></textarea>
            </div>
            <button type="button" id="addNode" class="btn btn-primary">Add Node</button>

            <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">json</span>
                </div>
                <textarea id="newLink" class="form-control" aria-label="json"></textarea>
            </div>
            <button type="button" id="addLink" class="btn btn-primary">Add Link</button>

            <svg id="svg" width="100vw" min-width="100vw" height="100vh" min-height="100vh">
                
            </svg>
        </div>

        <script>
            $('#loadJson').on('click', function(event) {
                event.preventDefault();
                var json = $('textarea#json').val();
                LoadJson(json);
            });            
            $('#addNode').on('click', function(event) {
                event.preventDefault();
                var json = $('textarea#newNode').val();
                AddNode(json);
            });            
            $('#addLink').on('click', function(event) {
                event.preventDefault();
                var json = $('textarea#newLink').val();
                AddLink(json);
            });            
        </script>

        <script type="application/json" id="mis">
        {
            "nodes": [
            {
                "id": "f0e305ae",
                "attributes":
                [
                    { "key": "Id", "value": "f0e305ae" },
                    { "key": "Name", "value": "Henrik Vindshøj" },
                    { "key": "Email", "value": "henrik@vindshoej.dk" },
                    { "key": "Phone", "value": "+4520706897" }
               ],
               "group": 1
            }
            ,
            {
                "id": "44556677",
                "attributes": 
                [
                    { "key": "Id", "value": "44556677" },
                    { "key": "Name", "value": "Else Vindshøj" },
                    { "key": "Email", "value": "else@whoelse.dk" }
                ],
               "group": 1
            }
            ,
            {
                "id": "00755547",
                "attributes": 
                [
                    { "key": "Id", "value": "00755547" },
                    { "key": "Name", "value": "Else " },
                    { "key": "Email", "value": "else@.dk" }
                ],
               "group": 1
            }
         ],
         "links": [
            {
               "source": "44556677",
               "target": "00755547"
            }
            ,
            {
               "source": "f0e305ae",
               "target": "00755547"
            }
         ]
        }</script>

        <script src="/js/main.js"></script>

        <script>
            var mis = document.getElementById('mis').innerHTML;
            $('textarea#json').val(mis);
            LoadJson(mis);

            // setTimeout(() => {
            //     LoadJson(mis);
            // }, 200);

        </script>

    </body>
</html>